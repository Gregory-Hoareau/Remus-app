{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/antho/OneDrive/Documents/GitHub/Remus-app/remus-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { AlertController, ModalController } from '@ionic/angular';\nimport { Router } from '@angular/router';\nimport { AchivementService } from \"../../providers/achivement/achivement.service\";\nimport { PlayersService } from \"../../providers/players/players.service\";\nimport { faEye } from \"@fortawesome/free-solid-svg-icons\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"../../providers/players/players.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../providers/achivement/achivement.service\";\nimport * as i5 from \"@angular/common\";\n\nfunction AchivementPage_ion_list_9_ion_item_sliding_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-item-sliding\", null, 13)(2, \"ion-item-options\", 14)(3, \"ion-item-option\", 15);\n    i0.ɵɵlistener(\"click\", function AchivementPage_ion_list_9_ion_item_sliding_1_Template_ion_item_option_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const achivement_r6 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.validAchivement(achivement_r6.titre));\n    });\n    i0.ɵɵelement(4, \"ion-checkbox\", 16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"ion-item\", 17);\n    i0.ɵɵlistener(\"click\", function AchivementPage_ion_list_9_ion_item_sliding_1_Template_ion_item_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const achivement_r6 = restoredCtx.$implicit;\n\n      const _r7 = i0.ɵɵreference(1);\n\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.showAchivement(achivement_r6, _r7));\n    });\n    i0.ɵɵelementStart(6, \"ion-icon\", 18);\n    i0.ɵɵlistener(\"click\", function AchivementPage_ion_list_9_ion_item_sliding_1_Template_ion_icon_click_6_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n\n      const _r7 = i0.ɵɵreference(1);\n\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.startClick(_r7, $event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"ion-title\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"ion-icon\", 19);\n    i0.ɵɵlistener(\"click\", function AchivementPage_ion_list_9_ion_item_sliding_1_Template_ion_icon_click_9_listener() {\n      i0.ɵɵrestoreView(_r9);\n\n      const _r7 = i0.ɵɵreference(1);\n\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.endClick(_r7));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"ion-item-options\", 20)(11, \"ion-item-option\", 21);\n    i0.ɵɵlistener(\"click\", function AchivementPage_ion_list_9_ion_item_sliding_1_Template_ion_item_option_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const achivement_r6 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.trash(achivement_r6));\n    });\n    i0.ɵɵelement(12, \"ion-icon\", 22);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const achivement_r6 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"checked\", achivement_r6.checked);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(achivement_r6.titre);\n  }\n}\n\nfunction AchivementPage_ion_list_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-list\");\n    i0.ɵɵtemplate(1, AchivementPage_ion_list_9_ion_item_sliding_1_Template, 13, 2, \"ion-item-sliding\", 12);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.achivements);\n  }\n}\n\nfunction AchivementPage_ion_list_10_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-item\", 17);\n    i0.ɵɵlistener(\"click\", function AchivementPage_ion_list_10_ion_item_1_Template_ion_item_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r17);\n      const achivement_r15 = restoredCtx.$implicit;\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r16.showAchivement(achivement_r15));\n    });\n    i0.ɵɵelementStart(1, \"ion-title\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"ion-checkbox\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const achivement_r15 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(achivement_r15.titre);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"checked\", achivement_r15.checked)(\"disabled\", true);\n  }\n}\n\nfunction AchivementPage_ion_list_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-list\");\n    i0.ɵɵtemplate(1, AchivementPage_ion_list_10_ion_item_1_Template, 4, 3, \"ion-item\", 23);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.achivements);\n  }\n}\n\nfunction AchivementPage_ion_text_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-text\", 25);\n    i0.ɵɵtext(1, \" Le Ma\\u00EEtre du Jeu n'a pas souhait\\u00E9 partager les succ\\u00E8s. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AchivementPage_ion_fab_12_ion_fab_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-fab-button\", 29);\n    i0.ɵɵlistener(\"click\", function AchivementPage_ion_fab_12_ion_fab_button_1_Template_ion_fab_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r20.desactivatePartage());\n    });\n    i0.ɵɵelement(1, \"ion-img\", 30);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AchivementPage_ion_fab_12_ion_fab_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-fab-button\", 15);\n    i0.ɵɵlistener(\"click\", function AchivementPage_ion_fab_12_ion_fab_button_2_Template_ion_fab_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r22.activatePartage());\n    });\n    i0.ɵɵelement(1, \"ion-img\", 30);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AchivementPage_ion_fab_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-fab\", 26);\n    i0.ɵɵtemplate(1, AchivementPage_ion_fab_12_ion_fab_button_1_Template, 2, 0, \"ion-fab-button\", 27);\n    i0.ɵɵtemplate(2, AchivementPage_ion_fab_12_ion_fab_button_2_Template, 2, 0, \"ion-fab-button\", 28);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.achivementService.partage);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.achivementService.partage);\n  }\n}\n\nfunction AchivementPage_ion_fab_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-fab\", 31)(1, \"ion-fab-button\", 29);\n    i0.ɵɵlistener(\"click\", function AchivementPage_ion_fab_13_Template_ion_fab_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r24.newAchivement());\n    });\n    i0.ɵɵelement(2, \"ion-icon\", 32);\n    i0.ɵɵelementEnd()();\n  }\n}\n\nexport let AchivementPage = /*#__PURE__*/(() => {\n  class AchivementPage {\n    constructor(modalCtrl, playersService, router, alertController, achivementService) {\n      this.modalCtrl = modalCtrl;\n      this.playersService = playersService;\n      this.router = router;\n      this.alertController = alertController;\n      this.achivementService = achivementService;\n      this.eye = faEye;\n      this.players = null;\n      this.avancee = 1;\n      this.startOpen = false;\n      this.endOpen = false;\n      this.players = this.playersService.playersList;\n      this.achivements = achivementService.achivements;\n      this.achivementService.setUpAvancee();\n      this.avancee = this.achivementService.avancee;\n    }\n\n    showAchivement(achivement, sliding) {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        if (sliding) {\n          sliding.close();\n        }\n\n        const alert = yield _this.alertController.create({\n          header: achivement.titre,\n          message: achivement.description,\n          buttons: [{\n            text: 'Ok',\n            role: 'Ok',\n            handler: () => {\n              alert.dismiss();\n            }\n          }]\n        });\n        yield alert.present();\n      })();\n    }\n\n    newAchivement() {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        const alert = yield _this2.alertController.create({\n          header: 'Nouveau Succés',\n          cssClass: 'custom-popup-css',\n          message: 'Ajouter un titre et une description :',\n          inputs: [{\n            name: 'titre',\n            type: 'text',\n            placeholder: 'Titre'\n          }, {\n            name: 'description',\n            type: 'text',\n            placeholder: 'Description'\n          }],\n          buttons: [{\n            text: 'Annuler',\n            role: 'cancel',\n            handler: () => {\n              alert.dismiss();\n            }\n          }, {\n            text: 'Confirmer',\n            handler: data => {\n              _this2.addAchivement(data);\n            }\n          }]\n        });\n        yield alert.present();\n      })();\n    }\n\n    startClick(itemSliding, event) {\n      event.stopPropagation();\n      itemSliding.open('start');\n    }\n\n    endClick(itemSliding) {\n      event.stopPropagation();\n      itemSliding.open('end');\n    }\n\n    trash(achivement) {\n      this.achivements.splice(this.achivements.indexOf(achivement), 1);\n      this.achivementService.setUpAvancee();\n      this.avancee = this.achivementService.avancee;\n      this.players.forEach(p => {\n        p.conn.send({\n          removeAchivement: achivement\n        });\n      });\n    }\n\n    addAchivement(data) {\n      this.achivementService.addAchivement({\n        titre: data.titre,\n        checked: false,\n        description: data.description\n      });\n      this.players.forEach(p => {\n        p.conn.send({\n          achivement: data.titre,\n          description: data.description\n        });\n      });\n      this.achivementService.setUpAvancee();\n      this.avancee = this.achivementService.avancee;\n    }\n\n    validAchivement(titre) {\n      this.achivementService.validAchivement(titre);\n      this.players.forEach(p => {\n        p.conn.send({\n          achivementValide: titre\n        });\n      });\n      this.achivementService.setUpAvancee();\n      this.avancee = this.achivementService.avancee;\n    }\n\n    activatePartage() {\n      var _this3 = this;\n\n      return _asyncToGenerator(function* () {\n        const alert = yield _this3.alertController.create({\n          cssClass: 'custom-popup-css',\n          message: 'Vous êtes sur le point de partager les succés avec les autres joueurs. Voulez-vous continuer?',\n          buttons: [{\n            text: 'Non',\n            role: 'non',\n            handler: () => {\n              alert.dismiss();\n            }\n          }, {\n            text: 'Oui',\n            handler: () => {\n              _this3.achivementService.partage = !_this3.achivementService.partage;\n\n              _this3.players.forEach(p => {\n                p.conn.send({\n                  achivementPartage: true\n                });\n                console.log(_this3.achivementService.partage);\n              });\n            }\n          }]\n        });\n        yield alert.present();\n      })();\n    } // bug connu : Le bouton ne fonctionne qu'une fois sur deux.\n\n\n    desactivatePartage() {\n      var _this4 = this;\n\n      return _asyncToGenerator(function* () {\n        const alert = yield _this4.alertController.create({\n          cssClass: 'custom-popup-css',\n          message: 'Vous êtes sur le point de retier le partage des succés avec les autres joueurs. Voulez-vous continuer?',\n          buttons: [{\n            text: 'Non',\n            role: 'non',\n            handler: () => {\n              alert.dismiss();\n            }\n          }, {\n            text: 'Oui',\n            handler: data => {\n              _this4.achivementService.partage = !_this4.achivementService.partage;\n\n              _this4.players.forEach(p => {\n                p.conn.send({\n                  achivementPartage: false\n                });\n                console.log(_this4.achivementService.partage);\n              });\n            }\n          }]\n        });\n        yield alert.present();\n      })();\n    }\n\n  }\n\n  AchivementPage.ɵfac = function AchivementPage_Factory(t) {\n    return new (t || AchivementPage)(i0.ɵɵdirectiveInject(i1.ModalController), i0.ɵɵdirectiveInject(i2.PlayersService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i1.AlertController), i0.ɵɵdirectiveInject(i4.AchivementService));\n  };\n\n  AchivementPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AchivementPage,\n    selectors: [[\"app-achivement\"]],\n    decls: 14,\n    vars: 8,\n    consts: [[3, \"translucent\"], [\"color\", \"header\"], [\"size\", \"large\", 1, \"ion-text-center\", 2, \"font-family\", \"'Playfair display',serif\"], [\"slot\", \"end\", 3, \"click\"], [\"name\", \"close-outline\", 1, \"ion-margin\"], [3, \"fullscreen\"], [1, \"bar\"], [1, \"percentage\", \"has-tip\", 3, \"value\"], [4, \"ngIf\"], [\"class\", \"ion-text-center\", 4, \"ngIf\"], [\"vertical\", \"bottom\", \"horizontal\", \"begin\", \"slot\", \"fixed\", 4, \"ngIf\"], [\"vertical\", \"bottom\", \"horizontal\", \"end\", \"slot\", \"fixed\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [\"sliding\", \"\"], [\"side\", \"start\"], [\"color\", \"white\", 3, \"click\"], [3, \"checked\"], [3, \"click\"], [\"name\", \"chevron-back\", \"color\", \"primary\", 3, \"click\"], [\"slot\", \"end\", \"name\", \"chevron-forward\", \"color\", \"danger\", 3, \"click\"], [\"side\", \"end\"], [\"color\", \"danger\", 3, \"click\"], [\"name\", \"trash\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"checked\", \"disabled\"], [1, \"ion-text-center\"], [\"vertical\", \"bottom\", \"horizontal\", \"begin\", \"slot\", \"fixed\"], [\"color\", \"btn-purple\", 3, \"click\", 4, \"ngIf\"], [\"color\", \"white\", 3, \"click\", 4, \"ngIf\"], [\"color\", \"btn-purple\", 3, \"click\"], [\"src\", \"/assets/eye-regular.svg\", 1, \"customImg\"], [\"vertical\", \"bottom\", \"horizontal\", \"end\", \"slot\", \"fixed\"], [\"name\", \"add\"]],\n    template: function AchivementPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\", 1)(2, \"ion-title\", 2);\n        i0.ɵɵtext(3, \" Succ\\u00E8s \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-buttons\", 3);\n        i0.ɵɵlistener(\"click\", function AchivementPage_Template_ion_buttons_click_4_listener() {\n          return ctx.modalCtrl.dismiss(undefined, \"cancel\");\n        });\n        i0.ɵɵelement(5, \"ion-icon\", 4);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(6, \"ion-content\", 5)(7, \"div\", 6);\n        i0.ɵɵelement(8, \"ion-progress-bar\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(9, AchivementPage_ion_list_9_Template, 2, 1, \"ion-list\", 8);\n        i0.ɵɵtemplate(10, AchivementPage_ion_list_10_Template, 2, 1, \"ion-list\", 8);\n        i0.ɵɵtemplate(11, AchivementPage_ion_text_11_Template, 2, 0, \"ion-text\", 9);\n        i0.ɵɵtemplate(12, AchivementPage_ion_fab_12_Template, 3, 2, \"ion-fab\", 10);\n        i0.ɵɵtemplate(13, AchivementPage_ion_fab_13_Template, 3, 0, \"ion-fab\", 11);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"translucent\", true);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"fullscreen\", true);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"value\", ctx.achivementService.avancee);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.playersService.isHost);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.playersService.isHost && ctx.achivementService.partage);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.playersService.isHost && !ctx.achivementService.partage);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.playersService.isHost);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.playersService.isHost);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i1.IonButtons, i1.IonCheckbox, i1.IonContent, i1.IonFab, i1.IonFabButton, i1.IonHeader, i1.IonIcon, i1.IonImg, i1.IonItem, i1.IonItemOption, i1.IonItemOptions, i1.IonItemSliding, i1.IonList, i1.IonProgressBar, i1.IonText, i1.IonTitle, i1.IonToolbar, i1.BooleanValueAccessor],\n    styles: [\".customImg[_ngcontent-%COMP%]{height:80%;width:80%}.bar[_ngcontent-%COMP%]{margin-top:20px;margin-left:7.5%;width:85%;height:1em;border-radius:.5em;position:relative;background:#f2f2f2;box-shadow:inset 0 0 0 1px #0000001a}.new-background-color[_ngcontent-%COMP%]{--background: #faefe1}.bar[_ngcontent-%COMP%]   .percentage[_ngcontent-%COMP%]{position:relative;font-size:1em;background:red;height:1em;border-radius:.5em}\"]\n  });\n  return AchivementPage;\n})();","map":null,"metadata":{},"sourceType":"module"}