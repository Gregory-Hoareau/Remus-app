{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/antho/OneDrive/Documents/GitHub/Remus-app/remus-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { NgZone } from \"@angular/core\";\nimport { Platform, ModalController } from \"@ionic/angular\";\nimport { SplashScreen } from \"@ionic-native/splash-screen/ngx\";\nimport { StatusBar } from \"@ionic-native/status-bar/ngx\";\nimport { Router } from \"@angular/router\";\nimport { faDiceD20, faHome, faPowerOff, faCommentAlt, faUserSlash, faPeopleArrows, faTrophy } from \"@fortawesome/free-solid-svg-icons\";\nimport { PlayersService } from \"./providers/players/players.service\";\nimport { Player } from \"./models/player.models\";\nimport { SessionChatPage } from \"./pages/session-chat/session-chat.page\";\nimport { AchivementPage } from \"./pages/achivement/achivement.page\";\nimport { Location } from \"@angular/common\";\nimport { Conversation } from \"./models/conversation.model\";\nimport { Deeplinks } from \"@ionic-native/deeplinks/ngx\";\nimport { JoinFormPage } from \"./pages/join-form/join-form.page\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@ionic-native/splash-screen/ngx\";\nimport * as i3 from \"@ionic-native/status-bar/ngx\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"./providers/players/players.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@ionic-native/deeplinks/ngx\";\nimport * as i8 from \"@fortawesome/angular-fontawesome\";\n\nconst _c0 = function (a0) {\n  return [a0];\n};\n\nfunction AppComponent_ion_menu_toggle_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-menu-toggle\", 13)(1, \"ion-item\", 14);\n    i0.ɵɵelement(2, \"fa-icon\", 10);\n    i0.ɵɵelementStart(3, \"ion-label\", 15);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const p_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerDirection\", \"root\")(\"routerLink\", i0.ɵɵpureFunction1(4, _c0, p_r2.url));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"icon\", p_r2.icon);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", p_r2.title, \" \");\n  }\n}\n\nfunction AppComponent_ion_item_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-item\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"fa-icon\", 17);\n    i0.ɵɵlistener(\"click\", function AppComponent_ion_item_22_Template_fa_icon_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const player_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.openChat(player_r3));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"fa-icon\", 17);\n    i0.ɵɵlistener(\"click\", function AppComponent_ion_item_22_Template_fa_icon_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const player_r3 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.kick(player_r3));\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const player_r3 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", player_r3.name, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"icon\", ctx_r1.chatIcon);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"icon\", ctx_r1.kickIcon);\n  }\n}\n\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(platform, splashScreen, statusBar, router, playersServ, modalCtrl, location, zone, deeplinks) {\n      this.platform = platform;\n      this.splashScreen = splashScreen;\n      this.statusBar = statusBar;\n      this.router = router;\n      this.playersServ = playersServ;\n      this.modalCtrl = modalCtrl;\n      this.location = location;\n      this.zone = zone;\n      this.deeplinks = deeplinks;\n      this.achievmentIcon = faTrophy;\n      this.powerIcon = faPowerOff;\n      this.chatIcon = faCommentAlt;\n      this.kickIcon = faUserSlash;\n      this.appPages = [{\n        title: \"Accueil\",\n        url: \"/home\",\n        icon: faHome\n      }, {\n        title: \"Simulateur\",\n        url: \"/simulateur\",\n        icon: faDiceD20\n      }, {\n        title: \"Communauté\",\n        url: \"/crowdsourcing\",\n        icon: faPeopleArrows\n      }];\n      this.initializeApp();\n    }\n\n    initializeApp() {\n      this.platform.ready().then(() => {\n        this.statusBar.styleDefault();\n        this.splashScreen.hide();\n        this.setupDeeplinks();\n      });\n    }\n\n    setupDeeplinks() {\n      this.deeplinks.route({\n        \"/join/:roomId\": \"join\"\n      }).subscribe(match => {\n        switch (match.$route) {\n          case \"join\":\n            this.zone.run(() => {\n              this.handleJoinDeeplink(match.$args.roomId);\n            });\n            break;\n\n          default:\n            break;\n        }\n      });\n    }\n\n    handleJoinDeeplink(roomId) {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        const modal = yield _this.modalCtrl.create({\n          component: JoinFormPage,\n          componentProps: {\n            id: roomId\n          }\n        });\n        modal.present();\n      })();\n    }\n\n    kick(player) {\n      this.playersServ.kickAlert(player);\n    }\n\n    quit() {\n      this.location.back();\n    }\n\n    openAchivementModal() {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        const modal = yield _this2.modalCtrl.create({\n          component: AchivementPage,\n          componentProps: {\n            charInd: -1\n          },\n          cssClass: \"custom-modal-css\",\n          swipeToClose: true\n        });\n        modal.onWillDismiss().then(dataReturned => {\n          if (dataReturned !== null && dataReturned.data !== \"\") {\n            const navigationExtras = {\n              state: dataReturned.data\n            };\n\n            _this2.location.back();\n          }\n        });\n        return modal.present();\n      })();\n    }\n\n    openChat(target = new Player(undefined, \"all\"), player = this.playersServ.me()) {\n      console.log(\"CLICKED ON \", target);\n\n      if (!this.playersServ.conversations.get(player)) {\n        this.playersServ.conversations.set(player, new Conversation());\n      }\n\n      this.modalCtrl.create({\n        component: SessionChatPage,\n        swipeToClose: true,\n        componentProps: {\n          target: target,\n          player: player\n        }\n      }).then(modal => {\n        modal.present();\n      });\n    }\n\n  }\n\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.Platform), i0.ɵɵdirectiveInject(i2.SplashScreen), i0.ɵɵdirectiveInject(i3.StatusBar), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.PlayersService), i0.ɵɵdirectiveInject(i1.ModalController), i0.ɵɵdirectiveInject(i6.Location), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(i7.Deeplinks));\n  };\n\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    decls: 24,\n    vars: 3,\n    consts: [[\"contentId\", \"main-content\"], [\"side\", \"start\", \"menuId\", \"mainMenu\", \"contentId\", \"main-content\", \"type\", \"overlay\"], [\"color\", \"header\"], [2, \"font-family\", \"'Playfair display',serif\"], [2, \"--background\", \"#807d7a\"], [2, \"background\", \"#807d7a\"], [\"style\", \"background: #807d7a\", \"auto-hide\", \"false\", 4, \"ngFor\", \"ngForOf\"], [\"disabled\", \"true\", \"side\", \"end\", \"menuId\", \"playerList\", \"contentId\", \"main-content\", \"type\", \"overlay\"], [\"auto-hide\", \"false\"], [3, \"click\"], [3, \"icon\"], [\"class\", \"players\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"main-content\"], [\"auto-hide\", \"false\", 2, \"background\", \"#807d7a\"], [\"color\", \"medium\", 3, \"routerDirection\", \"routerLink\"], [2, \"font-family\", \"'Playfair display',sans-serif\"], [1, \"players\"], [1, \"icons\", 3, \"icon\", \"click\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-app\")(1, \"ion-split-pane\", 0)(2, \"ion-menu\", 1)(3, \"ion-header\")(4, \"ion-toolbar\", 2)(5, \"ion-title\", 3);\n        i0.ɵɵtext(6, \"Menu\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(7, \"ion-content\", 4)(8, \"ion-list\", 5);\n        i0.ɵɵtemplate(9, AppComponent_ion_menu_toggle_9_Template, 5, 6, \"ion-menu-toggle\", 6);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(10, \"ion-menu\", 7)(11, \"ion-header\")(12, \"ion-toolbar\", 2)(13, \"ion-title\", 3);\n        i0.ɵɵtext(14, \"Joueurs Connect\\u00E9s\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(15, \"ion-content\")(16, \"ion-menu-toggle\", 8)(17, \"ion-list\")(18, \"ion-item\", 9);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_ion_item_click_18_listener() {\n          return ctx.quit();\n        });\n        i0.ɵɵelement(19, \"fa-icon\", 10);\n        i0.ɵɵelementStart(20, \"ion-label\");\n        i0.ɵɵtext(21, \" Quitter \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(22, AppComponent_ion_item_22_Template, 4, 3, \"ion-item\", 11);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelement(23, \"ion-router-outlet\", 12);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngForOf\", ctx.appPages);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"icon\", ctx.powerIcon);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.playersServ.playersList);\n      }\n    },\n    dependencies: [i6.NgForOf, i1.IonApp, i1.IonContent, i1.IonHeader, i1.IonItem, i1.IonLabel, i1.IonList, i1.IonMenu, i1.IonMenuToggle, i1.IonSplitPane, i1.IonTitle, i1.IonToolbar, i1.IonRouterOutlet, i1.RouterLinkDelegate, i4.RouterLink, i8.FaIconComponent],\n    styles: [\"fa-icon[_ngcontent-%COMP%]{margin-right:1%}.players[_ngcontent-%COMP%]{font-size:18px;margin:1%;padding:1%;color:#1e90ff}.icons[_ngcontent-%COMP%]{margin:5%;padding:5%}.new-background-color[_ngcontent-%COMP%]{--background: #faefe1}\"]\n  });\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}